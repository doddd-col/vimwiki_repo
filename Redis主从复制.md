## Redis主从复制
>一般来说就是主机更新后根据配置和策略，自动同步到备机的master/slaver机制
>
>Master以写为主，Slave以读为主

```
1. 配从不配主
2. 从库配置：slaveof 主库ip 主库端口
	- 每次与master(slave宕机/关机)断开之后，如果没有配置进redis.conf都需要重新连接
```

**主要是应付读写分离和容灾恢复**  
- 读写分离：从库只能读不能写


*命令*

>info replication	--查看本机redis情况

>slaver no one		--恢复从机的master身份

**复制原理**  
```
Slave启动成功连接到master后会发送一个sync命令
Master接到命令后启动后台存盘进程，同时收集所有收到的用于修改数据集命令，
在后台进程执行完毕之后，master将传送整个数据文件到slave，以完成一次完全同步

1. 全量复制：slave服务在接受到数据库文件数据后，将其存盘斌加载到内存中
2. 增量复制：Master继续将新的所有收集到的修改命令一次传给slave，完成同步
# 只能能够重新连接master，一次完全同步（全量复制）被自动执行
```

**哨兵模式**
```
可以监控多个主机, 一旦主机宕机，剩下的从机自动投票选出新的主机, 之后再回来的旧主机会变成Slave

1. 创建一个sentinel.conf文件
2. 写入：sentinel monitor 被监控的数据库名字(自己起名字) 主机ip 端口号 1(票数，大于多少票成为新主机)
3. 启动：Redis-sentinel 文件所在目录
```

   
